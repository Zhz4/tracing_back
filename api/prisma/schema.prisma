// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// 跟踪数据表 - 包含所有 baseInfo 和 eventInfo 字段
model TrackingData {
  id String @id @default(uuid())

  // ========== baseInfo 字段 ==========
  // 网页可见区高度
  clientHeight Int    @default(0)
  // 网页可见区宽度
  clientWidth  Int    @default(0)
  // 显示屏幕调色板的比特深度
  colorDepth   Int    @default(0)
  // 显示屏幕的颜色分辨率
  pixelDepth   Int    @default(0)
  // 设备ID
  deviceId     String @default("")
  // 显示屏幕的宽度
  screenWidth  Int    @default(0)
  // 显示屏幕的高度
  screenHeight Int    @default(0)
  // 浏览器厂商
  vendor       String @default("")
  // 平台信息
  platform     String @default("")
  // 用户UUID
  userUuid     String @default("")
  // 用户名
  userName     String @default("")
  // SDK用户UUID
  sdkUserUuid  String @default("")

  // 应用名称
  appName    String @default("")
  // 应用代码
  appCode    String @default("")
  // 页面ID
  pageId     String @default("")
  // 会话ID
  sessionId  String @default("")
  // SDK版本
  sdkVersion String @default("")
  // IP地址
  ip         String @default("")
  // 发送时间
  sendTime   BigInt @default(0)
  // 扩展字段
  ext        Json?
  eventInfo  Json?

  // 事件类型
  @@index([id, sendTime])
  @@map("tracking_data")
}
